import{_ as de,u as ce,e as i,w as ue,c as ge,f as ve,g as me,a as u,b as o,h as A,i as Z,t as n,F as $,r as L,n as M,v as pe,j as J,d as V,k as fe,l as he,E as be,o as g}from"./index-D-RLPKeX.js";const ye={class:"min-h-screen bg-gray-50 py-10 px-4 sm:px-6 lg:px-8"},we={class:"bg-white shadow-lg rounded-xl p-6 mb-8"},xe={class:"text-3xl font-extrabold text-gray-800 mb-4"},ke={class:"text-lg text-gray-600 mb-6"},_e={class:"flex flex-wrap gap-3 mb-4"},$e=["onClick"],Le=["placeholder"],Me={key:0,class:"absolute z-50 bg-white border border-gray-200 rounded-md mt-2 w-full max-h-60 overflow-auto shadow-lg"},Se=["onClick"],Ce={class:"bg-white shadow-md rounded-xl p-4 mb-6"},De={class:"flex justify-between items-center mb-4"},Pe={class:"text-lg font-semibold text-gray-700"},Ie={class:"flex space-x-2"},Te={class:"rounded-lg shadow h-96 overflow-hidden"},Ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10"},Ne=["onClick"],Ee=["src"],Re={class:"p-4"},je={class:"text-lg font-bold text-gray-800"},Ae={class:"text-sm text-gray-500 mt-1"},Ve={class:"flex justify-between items-center mb-4"},Be={class:"text-xl font-bold text-gray-800"},ze={class:"flex justify-end gap-3"},Ke={class:"flex space-x-3 mb-4"},Oe=["onClick"],Ue={class:"text-sm text-gray-600 mb-6"},qe={class:"space-y-4"},We={class:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold"},Fe=["innerHTML"],He={class:"text-sm text-gray-500"},Ye="/src/info.mp3",B="/placeholder.jpg",Ze={__name:"CulturalLandmarks",setup(Je){const{t:d}=ce(),c=i(null),k=i(null),S=i(null),b=i(null),C=i(null),D=i([]),P=i("chinese"),h=i(""),_=i("map"),I=i([]),y=i([]),w=i([]),v=i(null),x=i({lat:-37.818267,lng:144.952974}),T=i("TRANSIT"),p=i({duration:"",distance:"",arrival:""}),z=i(null),G=i(null);d("landmarks.directions.transit"),d("landmarks.directions.driving"),d("landmarks.directions.walking");const Q=[{label:d("landmarks.filters.chinese"),value:"chinese"},{label:d("landmarks.filters.indian"),value:"indian"}],K=async()=>{const e=P.value==="chinese"?["chinese museum","place_of_worship","restaurant","tourist_attraction","store"]:["hindu_temple","restaurant","tourist_attraction Melbourne","store"];try{const a=e.map(m=>X(m)),t=(await Promise.all(a)).flat(),l=[],r=new Set;t.forEach(m=>{r.has(m.id)||(r.add(m.id),l.push(m))}),I.value=l,se()}catch(a){console.error("Error fetching landmarks:",a)}};function X(e){return new Promise(a=>{var l;if(!k.value||!((l=google==null?void 0:google.maps)!=null&&l.places)){console.error("Places service not available"),a([]);return}const s=new google.maps.LatLngBounds(new google.maps.LatLng(-39.2,140.8),new google.maps.LatLng(-33.9,149)),t={query:e,bounds:s,location:x.value,radius:2e4};k.value.textSearch(t,(r,m)=>{if(m===google.maps.places.PlacesServiceStatus.OK&&r){const j=r.map(f=>{var F,H,Y;return{id:f.place_id,name:f.name,location:f.formatted_address,lat:f.geometry.location.lat(),lng:f.geometry.location.lng(),image:((H=(F=f.photos)==null?void 0:F[0])==null?void 0:H.getUrl({maxWidth:400}))||B,description:((Y=f.types)==null?void 0:Y.join(", "))||"No description available"}}).filter(f=>/vic|victoria/i.test(f.location));a(j)}else a([])})})}ue(h,async e=>{var a;if(!e||!C.value||!((a=google==null?void 0:google.maps)!=null&&a.places)){y.value=[];return}C.value.getPlacePredictions({input:e,location:new google.maps.LatLng(x.value.lat,x.value.lng),radius:1e4},(s,t)=>{t===google.maps.places.PlacesServiceStatus.OK&&s?y.value=s:y.value=[]})});function ee(e){var s;if(!k.value||!((s=google==null?void 0:google.maps)!=null&&s.places)){console.error("Places service not available");return}const a={placeId:e.place_id,fields:["name","geometry","formatted_address","photos","types"]};k.value.getDetails(a,(t,l)=>{var r,m,R;if(l===google.maps.places.PlacesServiceStatus.OK&&t){const j={id:t.place_id,name:t.name,location:t.formatted_address,lat:t.geometry.location.lat(),lng:t.geometry.location.lng(),image:((m=(r=t.photos)==null?void 0:r[0])==null?void 0:m.getUrl({maxWidth:400}))||B,description:((R=t.types)==null?void 0:R.join(", "))||"No description available"};y.value=[],h.value=t.name,E(j,!0)}})}const N=ge(()=>h.value?I.value.filter(e=>e.name.toLowerCase().includes(h.value.toLowerCase())):I.value);function O(e){_.value=e,e==="map"&&c.value&&google.maps.event.trigger(c.value,"resize")}function te(e){P.value=e,h.value="",K()}function E(e,a=!1){ne(),v.value=e,U(e),a&&fe(()=>{var s;(s=z.value)==null||s.scrollIntoView({behavior:"smooth",block:"start"})}),q(),c.value&&e&&(c.value.setCenter({lat:e.lat,lng:e.lng}),c.value.setZoom(15))}function ae(e){T.value=e,v.value&&U(v.value)}function U(e){var a;if(!S.value||!b.value||!((a=google==null?void 0:google.maps)!=null&&a.DirectionsService)){console.error("Directions service not available");return}b.value.set("directions",null),S.value.route({origin:x.value,destination:{lat:e.lat,lng:e.lng},travelMode:google.maps.TravelMode[T.value]},(s,t)=>{if(t==="OK"&&s){b.value.setDirections(s);const l=s.routes[0].legs[0];w.value=l.steps.map(r=>({instructions:r.instructions,distance:r.distance.text,duration:r.duration.text})),p.value={duration:l.duration.text,distance:l.distance.text,arrival:oe(l.duration.value)}}else console.error("Directions request failed:",t),w.value=[],p.value={duration:"",distance:"",arrival:""}})}function oe(e){return new Date(Date.now()+e*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function se(){var a;if(!c.value||!((a=google==null?void 0:google.maps)!=null&&a.Marker)){console.error("Map not initialized");return}q();const e=new google.maps.LatLngBounds;N.value.forEach(s=>{const t=new google.maps.Marker({position:{lat:s.lat,lng:s.lng},map:c.value,title:s.name});t.addListener("click",()=>E(s,!0)),D.value.push(t),e.extend(t.getPosition())}),N.value.length&&c.value.fitBounds(e)}function q(){D.value.forEach(e=>e.setMap(null)),D.value=[]}function ne(){b.value&&(b.value.set("directions",null),w.value=[],p.value={duration:"",distance:"",arrival:""})}function le(){if(!v.value)return;const e=document.createElement("div");e.style.width="600px",e.style.padding="20px",e.style.background="white",e.style.fontFamily="Arial",e.innerHTML=`
    <h1>${v.value.name}</h1>
    <p><strong>${d("landmarks.directions.location")}:</strong> ${v.value.location}</p>
    <img src="${v.value.image}" style="width:100%;border-radius:8px;" />
    <p><strong>${d("landmarks.directions.description")}:</strong> ${v.value.description}</p>
    <p><strong>${d("landmarks.directions.distance")}:</strong> ${p.value.distance}</p>
    <p><strong>${d("landmarks.directions.time")}:</strong> ${p.value.duration}</p>
    <p><strong>${d("landmarks.directions.arrival")}:</strong> ${p.value.arrival}</p>
    <h2>${d("landmarks.directions.steps")}:</h2>
    ${w.value.map((a,s)=>`
      <p><strong>${s+1}.</strong> ${a.instructions} (${a.distance}, ${a.duration})</p>
    `).join("")}
  `,document.body.appendChild(e),he(e).then(a=>{const s=new be,t=a.toDataURL("image/png");s.addImage(t,"PNG",0,0,210,0),s.save(`${v.value.name}-guide.pdf`),document.body.removeChild(e)})}function ie(){G.value&&G.value.play()}function re(){navigator.geolocation&&navigator.geolocation.watchPosition(e=>{x.value={lat:e.coords.latitude,lng:e.coords.longitude}},e=>{console.error("Geolocation error:",e)})}function W(){try{c.value=new google.maps.Map(document.getElementById("map"),{center:x.value,zoom:12}),k.value=new google.maps.places.PlacesService(c.value),C.value=new google.maps.places.AutocompleteService,S.value=new google.maps.DirectionsService,b.value=new google.maps.DirectionsRenderer({map:c.value}),K()}catch(e){console.error("Error initializing map:",e)}}return ve(()=>{if(re(),window.google&&window.google.maps)W();else{const e="AIzaSyDG7RY5Rx7EE9Y_-rlLwN1hlhkODUGV3Lc",a=document.createElement("script");a.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places&callback=initGoogleMaps`,a.async=!0,a.defer=!0,window.initGoogleMaps=function(){W()},document.head.appendChild(a)}}),me(()=>{window.initGoogleMaps&&delete window.initGoogleMaps}),(e,a)=>{var s;return g(),u("div",ye,[o("div",we,[o("h2",xe,n(e.$t("landmarks.title")),1),o("p",ke,n(e.$t("landmarks.subtitle")),1),o("div",_e,[(g(),u($,null,L(Q,t=>o("button",{key:t.value,onClick:l=>te(t.value),class:M([P.value===t.value?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200","px-4 py-2 rounded-full font-semibold border transition"])},n(e.$t(`landmarks.filters.${t.value}`)),11,$e)),64))]),A(o("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>h.value=t),type:"text",placeholder:e.$t("landmarks.searchPlaceholder"),class:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"},null,8,Le),[[pe,h.value]]),y.value.length?(g(),u("ul",Me,[(g(!0),u($,null,L(y.value,t=>(g(),u("li",{key:t.place_id,onClick:l=>ee(t),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-800"},n(t.description),9,Se))),128))])):Z("",!0)]),o("div",Ce,[o("div",De,[o("h3",Pe,n(e.$t("landmarks.viewMode.title")),1),o("div",Ie,[o("button",{onClick:a[1]||(a[1]=t=>O("map")),class:M([_.value==="map"?"bg-blue-600 text-white":"bg-gray-200 text-gray-800","px-4 py-1 rounded-lg"])},n(e.$t("landmarks.viewMode.map")),3),o("button",{onClick:a[2]||(a[2]=t=>O("list")),class:M([_.value==="list"?"bg-blue-600 text-white":"bg-gray-200 text-gray-800","px-4 py-1 rounded-lg"])},n(e.$t("landmarks.viewMode.list")),3)])]),A(o("div",Te,a[4]||(a[4]=[o("div",{id:"map",class:"w-full h-full rounded-lg"},null,-1)]),512),[[J,_.value==="map"]])]),A(o("div",Ge,[(g(!0),u($,null,L(N.value,t=>(g(),u("div",{key:t.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition cursor-pointer",onClick:l=>E(t)},[o("img",{src:t.image,onError:a[3]||(a[3]=l=>l.target.src=B),class:"w-full h-48 object-cover"},null,40,Ee),o("div",Re,[o("h2",je,n(t.name),1),o("p",Ae,n(t.location),1)])],8,Ne))),128))],512),[[J,_.value==="list"]]),w.value.length?(g(),u("div",{key:0,class:"bg-white shadow-md rounded-xl p-6 mb-10",ref_key:"directionsSection",ref:z},[o("div",Ve,[o("h3",Be,n(e.$t("landmarks.directions.title"))+" "+n((s=v.value)==null?void 0:s.name),1),o("div",ze,[o("button",{onClick:ie,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2"},[a[5]||(a[5]=o("i",{class:"mdi mdi-volume-high"},null,-1)),o("span",null,n(e.$t("landmarks.directions.audioGuide")),1)]),o("button",{onClick:le,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2"},[a[6]||(a[6]=o("i",{class:"mdi mdi-download"},null,-1)),o("span",null,n(e.$t("landmarks.directions.savePdf")),1)])]),o("audio",{ref_key:"audioRef",ref:G,src:Ye,class:"hidden"},null,512)]),o("div",Ke,[(g(),u($,null,L(["TRANSIT","WALKING","DRIVING"],t=>o("button",{key:t,onClick:l=>ae(t),class:M([T.value===t?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200","px-4 py-2 rounded-full border text-sm font-medium transition"])},n(e.$t(`landmarks.directions.${t.toLowerCase()}`)),11,Oe)),64))]),o("div",Ue,[o("p",null,[o("strong",null,n(e.$t("landmarks.directions.distance"))+":",1),V(" "+n(p.value.distance),1)]),o("p",null,[o("strong",null,n(e.$t("landmarks.directions.time"))+":",1),V(" "+n(p.value.duration),1)]),o("p",null,[o("strong",null,n(e.$t("landmarks.directions.arrival"))+":",1),V(" "+n(p.value.arrival),1)])]),o("div",qe,[(g(!0),u($,null,L(w.value,(t,l)=>(g(),u("div",{key:l,class:"flex items-start space-x-4"},[o("div",We,n(l+1),1),o("div",null,[o("p",{innerHTML:t.instructions,class:"font-medium text-gray-800"},null,8,Fe),o("p",He,n(t.distance)+" â€¢ "+n(t.duration),1)])]))),128))])],512)):Z("",!0)])}}},Xe=de(Ze,[["__scopeId","data-v-3e136b02"]]);export{Xe as default};
